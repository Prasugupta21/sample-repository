int MaxSum(vector<int>& nums){
    int maxSum=INT_MIN;
     int currsum=0;
     for(int i=0;i<nums.size();i++){
           currsum+=nums[i];
           maxSum=max(maxSum,currsum);
           if(currsum<0){
               currsum=0;
           }
        

        }
        return maxSum;
}
int MinSum(vector<int>& nums){
int minSum=INT_MAX;
int currsum=0;
 for(int i=0;i<nums.size();i++){
           currsum+=nums[i];
           minSum=min(minSum,currsum);
           if(currsum>0){
               currsum=0;
           }
        

        }
        return minSum;
}
class Solution {
public:

    int maxSubarraySumCircular(vector<int>& nums) {
        int ans=INT_MIN,sum=0;
       
        int x=1;
        for(int i=0;i<nums.size();i++){
            if(nums[i]>0){
                x=0;
                break;
            }
            ans=max(ans,nums[i]);
        }
        if(x){
            return ans;

        }
        int ans1=MaxSum(nums);
        for(int i=0;i<nums.size();i++){
            sum+=nums[i];
        }
       int ans2=sum-MinSum(nums);
       return max(ans1,ans2);
        
    }
};

2nd implementation

class Solution {
public:
    int maxSubarraySumCircular(vector<int>& nums) {
        int totalSum = 0, maxSum = INT_MIN, curMax = 0, minSum = INT_MAX, curMin = 0;
    for (int x : nums) {
        curMax = max(x, curMax + x);  //update the current max subarray sum
        maxSum = max(maxSum, curMax); //update the overall max subarray sum
        curMin = min(x, curMin + x);  //update the current min subarray sum
        minSum = min(minSum, curMin); //update the overall min subarray sum
        totalSum += x;
    }
    return maxSum > 0 ? max(maxSum, totalSum - minSum) : maxSum;
    }
};



// 3rd implementation

class Solution {
private:
    int kedanes(vector<int> &nums){
        int maxSum = nums[0], currSum = nums[0];
        for(int i = 1; i < nums.size(); ++i){
            if(currSum < 0) currSum = 0;
            currSum += nums[i];
            maxSum = max(maxSum, currSum);
        }
        return maxSum;
    }
public:
    int maxSubarraySumCircular(vector<int>& nums) {
        int x = kedanes(nums);
        int y = 0;
        for(auto &e: nums){
            y += e;
            e *= -1;
        }
        int z = kedanes(nums);
        if(y + z == 0) return x;
        return max(x, y + z);
    }
};